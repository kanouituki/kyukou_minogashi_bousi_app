# 休講アラーム設計案（修正版）

## 🎯 アプリの目的

- 学生が休講情報を見逃して登校してしまう問題を解決する
- KLMS・keio.jpから休講情報を取得し、対象の授業が休講であればモバイル通知
- 家から出るタイミングで休講情報を確認し、登校を未然に防止

---

## 🧱 システム構成概要

```plaintext
┌────────────┐
│ ユーザー端末（アプリ）│
└────┬───────┘
     │ 通信（HTTPS）
     ▼
┌──────────────┐
│    サーバー / API     │
├──────────────┤
│ ・KLMS・keio.jpから取得  │
│ ・休講情報をDBに保存     │
│ ・家を出たら通知判定     │
└──────────────┘
```

## 🔧 主な機能と構成

### 1. 情報取得モジュール（サーバー）

#### KLMS連携
- ユーザーの認証情報（OAuth）からアクセストークンを取得
- 授業・お知らせから「休講情報」を定期的に取得
- ChatGPT API を使って自然言語から休講の有無を判定

#### keio.jpクローラー
- 体育や補講など、KLMSにない情報もスクレイピングで取得

### 2. 通知判定モジュール（アプリ側 + サーバー連携）

- アプリはバックグラウンドで常駐し、位置情報を監視
- 家を出たことを検知（例: 一定距離離れたら）
- 登校対象の授業に休講が含まれる場合、即座にプッシュ通知
- アプリ内通知のみ

## 📱 アプリ画面（最小構成）

- Keio認証ログイン画面（初回のみ）
- 簡易設定画面（通知ON/OFF、初期位置登録程度）

※授業スケジュールや履歴画面は今回スコープ外

## 🛠️ 使用技術

| 機能 | 技術候補 |
|------|----------|
| スクレイピング | Python (requests) |
| ChatGPT分析 | OpenAI API |
| バックエンド | Node.js |
| 位置情報取得 | GPS（スマホOS機能） |
| 認証 | OAuth（keio.jpログイン） |

## 💡 今後余力があれば検討

- 体育・補講・大学全体の休校情報も通知対象に追加

---

## 📂 プロジェクト進捗

### 完了済み
- [x] 基本的な位置情報取得機能（Game.cs）
- [x] 距離計算機能（ヒュベニの公式）
- [x] 基本UI（位置表示・記録ボタン）

### 実装予定
- [ ] APIトークン送信機能
- [ ] サーバー通信モジュール
- [ ] 休講情報取得API連携
- [ ] バックグラウンド位置監視
- [ ] プッシュ通知機能